<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DocClassifier Pro - AI Document Classification</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .progress-bar {
            background: linear-gradient(90deg, #667eea, #764ba2);
        }
        .file-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        .animate-pulse {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useCallback, useEffect } = React;
        const { FileText, Upload, Download, Loader2, CheckCircle, AlertCircle, Trash2, BarChart3, Eye, Building2, Users, FileSpreadsheet, Settings, Key } = lucide;

        const DocClassifierWeb = () => {
            const [files, setFiles] = useState([]);
            const [customers, setCustomers] = useState({});
            const [isProcessing, setIsProcessing] = useState(false);
            const [currentFile, setCurrentFile] = useState('');
            const [progress, setProgress] = useState(0);
            const [showDetails, setShowDetails] = useState({});
            const [apiKey, setApiKey] = useState(localStorage.getItem('claude-api-key') || '');
            const [showApiInput, setShowApiInput] = useState(!apiKey);
            const [processingStats, setProcessingStats] = useState({ processed: 0, total: 0 });
            const fileInputRef = useRef(null);

            const MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB
            const MAX_TOTAL_SIZE = 1.5 * 1024 * 1024 * 1024; // 1.5GB

            const CATEGORIES = [
                'H·ªì s∆° ph√°p l√Ω',
                'H·ªì s∆° t√†i ch√≠nh', 
                'ƒêƒÉng k√Ω kinh doanh',
                'CƒÉn c∆∞·ªõc c√¥ng d√¢n',
                'Gi·∫•y ph√©p l√°i xe',
                'H·ª£p ƒë·ªìng',
                'H√≥a ƒë∆°n',
                'B√°o c√°o t√†i ch√≠nh',
                'Ngh·ªã quy·∫øt',
                'Quy·∫øt ƒë·ªãnh',
                'Bi√™n b·∫£n',
                'Gi·∫•y ch·ª©ng nh·∫≠n',
                'Kh√°c'
            ];

            useEffect(() => {
                if (apiKey) {
                    localStorage.setItem('claude-api-key', apiKey);
                }
            }, [apiKey]);

            const handleFileUpload = useCallback((event) => {
                const selectedFiles = Array.from(event.target.files);
                const pdfFiles = selectedFiles.filter(file => file.type === 'application/pdf');
                
                if (pdfFiles.length !== selectedFiles.length) {
                    alert(`‚ö†Ô∏è Ch·ªâ ch·∫•p nh·∫≠n file PDF. ƒê√£ lo·∫°i b·ªè ${selectedFiles.length - pdfFiles.length} file kh√¥ng ph√π h·ª£p.`);
                }
                
                if (pdfFiles.length === 0) {
                    alert('‚ùå Kh√¥ng c√≥ file PDF n√†o ƒë∆∞·ª£c ch·ªçn.');
                    return;
                }

                // Check individual file size
                const oversizedFiles = pdfFiles.filter(file => file.size > MAX_FILE_SIZE);
                if (oversizedFiles.length > 0) {
                    alert(`‚ùå File qu√° l·ªõn (>50MB): ${oversizedFiles.map(f => f.name).join(', ')}`);
                    return;
                }

                // Check total size
                const currentTotal = files.reduce((sum, file) => sum + file.size, 0);
                const newTotal = currentTotal + pdfFiles.reduce((sum, file) => sum + file.size, 0);
                
                if (newTotal > MAX_TOTAL_SIZE) {
                    const currentMB = Math.round(currentTotal / 1024 / 1024);
                    const newMB = Math.round(newTotal / 1024 / 1024);
                    alert(`‚ùå V∆∞·ª£t qu√° gi·ªõi h·∫°n 1.5GB!\nHi·ªán t·∫°i: ${currentMB}MB\nSau khi th√™m: ${newMB}MB`);
                    return;
                }
                
                const uniqueFiles = pdfFiles.filter(newFile => 
                    !files.some(existingFile => 
                        existingFile.name === newFile.name && existingFile.size === newFile.size
                    )
                );

                if (uniqueFiles.length !== pdfFiles.length) {
                    alert(`‚ÑπÔ∏è ƒê√£ lo·∫°i b·ªè ${pdfFiles.length - uniqueFiles.length} file tr√πng l·∫∑p.`);
                }
                
                setFiles(prevFiles => [...prevFiles, ...uniqueFiles]);
            }, [files]);

            const removeFile = useCallback((index) => {
                setFiles(files.filter((_, i) => i !== index));
                // Remove from results if exists
                setCustomers(prev => {
                    const newCustomers = { ...prev };
                    Object.keys(newCustomers).forEach(customerName => {
                        newCustomers[customerName].documents = newCustomers[customerName].documents.filter(doc => doc.fileIndex !== index);
                        if (newCustomers[customerName].documents.length === 0) {
                            delete newCustomers[customerName];
                        }
                    });
                    return newCustomers;
                });
            }, [files]);

            const convertFileToBase64 = useCallback((file) => {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = () => {
                        try {
                            const base64 = reader.result.split(',')[1];
                            resolve(base64);
                        } catch (error) {
                            reject(new Error('Kh√¥ng th·ªÉ ƒë·ªçc file'));
                        }
                    };
                    reader.onerror = () => reject(new Error('L·ªói ƒë·ªçc file'));
                    reader.readAsDataURL(file);
                });
            }, []);

            const analyzeWithClaude = useCallback(async (base64Data, fileName, fileIndex) => {
                if (!apiKey.trim()) {
                    throw new Error('Ch∆∞a cung c·∫•p API key');
                }

                const maxRetries = 2;
                let lastError = null;

                for (let attempt = 0; attempt < maxRetries; attempt++) {
                    try {
                        const response = await fetch("https://api.anthropic.com/v1/messages", {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json",
                                "x-api-key": apiKey,
                                "anthropic-version": "2023-06-01"
                            },
                            body: JSON.stringify({
                                model: "claude-sonnet-4-20250514",
                                max_tokens: 3000,
                                messages: [
                                    {
                                        role: "user",
                                        content: [
                                            {
                                                type: "document",
                                                source: {
                                                    type: "base64",
                                                    media_type: "application/pdf",
                                                    data: base64Data,
                                                },
                                            },
                                            {
                                                type: "text",
                                                text: `Ph√¢n t√≠ch file PDF n√†y v√† tr·∫£ v·ªÅ JSON v·ªõi format ch√≠nh x√°c:

{
  "company_name": "t√™n c√¥ng ty/t·ªï ch·ª©c ch√≠nh x√°c t·ª´ t√†i li·ªáu",
  "company_id": "m√£ s·ªë thu·∫ø/s·ªë ƒëƒÉng k√Ω kinh doanh", 
  "document_category": "m·ªôt trong: ${CATEGORIES.join(', ')}",
  "document_title": "t√™n ch√≠nh x√°c c·ªßa t√†i li·ªáu n√†y",
  "document_number": "s·ªë/m√£ c·ªßa t√†i li·ªáu n·∫øu c√≥",
  "issue_date": "ng√†y ban h√†nh (DD/MM/YYYY)",
  "extracted_info": {
    "representative_name": "t√™n ng∆∞·ªùi ƒë·∫°i di·ªán ph√°p lu·∫≠t",
    "representative_id": "s·ªë CCCD/CMND c·ªßa ng∆∞·ªùi ƒë·∫°i di·ªán",
    "business_license": "s·ªë ƒëƒÉng k√Ω kinh doanh ch√≠nh",
    "tax_code": "m√£ s·ªë thu·∫ø",
    "address": "ƒë·ªãa ch·ªâ tr·ª• s·ªü ch√≠nh",
    "phone": "s·ªë ƒëi·ªán tho·∫°i li√™n h·ªá",
    "email": "email li√™n h·ªá",
    "other_info": "th√¥ng tin quan tr·ªçng kh√°c"
  },
  "confidence": 0.85,
  "key_fields": ["danh s√°ch c√°c tr∆∞·ªùng th√¥ng tin quan tr·ªçng t√¨m th·∫•y"]
}

QUY T·∫ÆC QUAN TR·ªåNG:
- CH·ªà tr·∫£ v·ªÅ JSON h·ª£p l·ªá
- KH√îNG c√≥ markdown, code blocks hay text gi·∫£i th√≠ch  
- company_name ph·∫£i ch√≠nh x√°c, ƒë√¢y l√† key ƒë·ªÉ group kh√°ch h√†ng
- document_title ph·∫£i m√¥ t·∫£ ch√≠nh x√°c lo·∫°i t√†i li·ªáu n√†y
- N·∫øu kh√¥ng t√¨m th·∫•y th√¥ng tin, ƒë·ªÉ gi√° tr·ªã r·ªóng ""
- confidence t·ª´ 0.0 ƒë·∫øn 1.0`
                                            },
                                        ],
                                    },
                                ]
                            })
                        });

                        if (!response.ok) {
                            const errorText = await response.text();
                            throw new Error(`API Error: ${response.status} - ${errorText}`);
                        }

                        const data = await response.json();
                        
                        if (!data.content || !data.content[0] || !data.content[0].text) {
                            throw new Error('Invalid API response structure');
                        }

                        let responseText = data.content[0].text.trim();
                        
                        // Clean response - remove all markdown formatting
                        responseText = responseText
                            .replace(/```json\s*/g, '')
                            .replace(/```\s*/g, '')
                            .replace(/^[^{]*/, '')
                            .replace(/[^}]*$/, '')
                            .trim();

                        const parsedResult = JSON.parse(responseText);

                        // Sanitize and validate result
                        const sanitizedResult = {
                            fileName,
                            fileIndex,
                            fileSize: 0, // Will be set by caller
                            company_name: (parsedResult.company_name || "Kh√¥ng x√°c ƒë·ªãnh").toString().trim(),
                            company_id: (parsedResult.company_id || "").toString().trim(),
                            document_category: parsedResult.document_category || "Kh√°c",
                            document_title: (parsedResult.document_title || fileName).toString().trim(),
                            document_number: (parsedResult.document_number || "").toString().trim(),
                            issue_date: (parsedResult.issue_date || "").toString().trim(),
                            extracted_info: {
                                representative_name: (parsedResult.extracted_info?.representative_name || "").toString().trim(),
                                representative_id: (parsedResult.extracted_info?.representative_id || "").toString().trim(),
                                business_license: (parsedResult.extracted_info?.business_license || "").toString().trim(),
                                tax_code: (parsedResult.extracted_info?.tax_code || "").toString().trim(),
                                address: (parsedResult.extracted_info?.address || "").toString().trim(),
                                phone: (parsedResult.extracted_info?.phone || "").toString().trim(),
                                email: (parsedResult.extracted_info?.email || "").toString().trim(),
                                other_info: (parsedResult.extracted_info?.other_info || "").toString().trim()
                            },
                            confidence: Math.max(0, Math.min(1, parsedResult.confidence || 0.5)),
                            key_fields: Array.isArray(parsedResult.key_fields) ? parsedResult.key_fields : [],
                            status: 'success',
                            processedAt: new Date().toLocaleString('vi-VN')
                        };

                        // Handle null values
                        Object.keys(sanitizedResult.extracted_info).forEach(key => {
                            if (sanitizedResult.extracted_info[key] === null || sanitizedResult.extracted_info[key] === "null") {
                                sanitizedResult.extracted_info[key] = "";
                            }
                        });

                        return sanitizedResult;

                    } catch (error) {
                        lastError = error;
                        console.error(`Attempt ${attempt + 1} failed for ${fileName}:`, error.message);
                        
                        if (attempt < maxRetries - 1) {
                            await new Promise(resolve => setTimeout(resolve, 1000 * (attempt + 1)));
                        }
                    }
                }

                // All attempts failed
                return {
                    fileName,
                    fileIndex,
                    fileSize: 0,
                    company_name: "L·ªói ph√¢n t√≠ch", 
                    company_id: "",
                    document_category: "L·ªói x·ª≠ l√Ω",
                    document_title: fileName,
                    document_number: "",
                    issue_date: "",
                    extracted_info: {
                        representative_name: "",
                        representative_id: "",
                        business_license: "",
                        tax_code: "",
                        address: "",
                        phone: "",
                        email: "",
                        other_info: lastError?.message || "Kh√¥ng th·ªÉ ph√¢n t√≠ch file"
                    },
                    confidence: 0.0,
                    key_fields: [],
                    status: 'error',
                    processedAt: new Date().toLocaleString('vi-VN')
                };
            }, [apiKey, CATEGORIES]);

            const processFiles = useCallback(async () => {
                if (files.length === 0) {
                    alert('‚ö†Ô∏è Vui l√≤ng ch·ªçn √≠t nh·∫•t 1 file PDF');
                    return;
                }

                if (!apiKey.trim()) {
                    alert('‚ö†Ô∏è Vui l√≤ng cung c·∫•p Claude API key');
                    setShowApiInput(true);
                    return;
                }

                const confirmProcess = window.confirm(
                    `üöÄ B·∫Øt ƒë·∫ßu x·ª≠ l√Ω ${files.length} file PDF?\n\nQu√° tr√¨nh n√†y c√≥ th·ªÉ m·∫•t 1-2 gi·ªù t√πy thu·ªôc v√†o s·ªë l∆∞·ª£ng v√† k√≠ch th∆∞·ªõc file.`
                );

                if (!confirmProcess) return;

                setIsProcessing(true);
                setCustomers({});
                setProgress(0);
                setProcessingStats({ processed: 0, total: files.length });

                const tempCustomers = {};

                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    setCurrentFile(file.name);
                    setProgress(Math.round(((i + 0.5) / files.length) * 100));
                    setProcessingStats({ processed: i, total: files.length });

                    try {
                        const base64Data = await convertFileToBase64(file);
                        const analysis = await analyzeWithClaude(base64Data, file.name, i);
                        analysis.fileSize = file.size;
                        
                        // Group by company
                        const companyKey = analysis.company_name || "Kh√¥ng x√°c ƒë·ªãnh";
                        if (!tempCustomers[companyKey]) {
                            tempCustomers[companyKey] = {
                                companyInfo: {
                                    name: analysis.company_name,
                                    id: analysis.company_id,
                                    representative: analysis.extracted_info.representative_name,
                                    representativeId: analysis.extracted_info.representative_id,
                                    businessLicense: analysis.extracted_info.business_license,
                                    taxCode: analysis.extracted_info.tax_code,
                                    address: analysis.extracted_info.address,
                                    phone: analysis.extracted_info.phone,
                                    email: analysis.extracted_info.email
                                },
                                documents: [],
                                stats: {
                                    totalFiles: 0,
                                    successFiles: 0,
                                    errorFiles: 0,
                                    avgConfidence: 0
                                }
                            };
                        }

                        tempCustomers[companyKey].documents.push(analysis);
                        
                    } catch (error) {
                        console.error(`Error processing ${file.name}:`, error);
                        
                        const errorCompany = "L·ªói x·ª≠ l√Ω";
                        if (!tempCustomers[errorCompany]) {
                            tempCustomers[errorCompany] = {
                                companyInfo: { name: errorCompany },
                                documents: [],
                                stats: { totalFiles: 0, successFiles: 0, errorFiles: 0, avgConfidence: 0 }
                            };
                        }

                        tempCustomers[errorCompany].documents.push({
                            fileName: file.name,
                            fileIndex: i,
                            fileSize: file.size,
                            company_name: errorCompany,
                            document_title: file.name,
                            status: 'error',
                            confidence: 0.0,
                            processedAt: new Date().toLocaleString('vi-VN'),
                            extracted_info: { other_info: error.message }
                        });
                    }
                    
                    setProgress(Math.round(((i + 1) / files.length) * 100));
                    setProcessingStats({ processed: i + 1, total: files.length });
                    setCustomers({ ...tempCustomers });
                }

                // Calculate stats for each customer
                Object.keys(tempCustomers).forEach(companyKey => {
                    const customer = tempCustomers[companyKey];
                    const docs = customer.documents;
                    customer.stats = {
                        totalFiles: docs.length,
                        successFiles: docs.filter(d => d.status === 'success').length,
                        errorFiles: docs.filter(d => d.status === 'error').length,
                        avgConfidence: docs.length > 0 ? 
                            Math.round(docs.reduce((sum, d) => sum + (d.confidence || 0), 0) / docs.length * 100) : 0
                    };
                });

                setIsProcessing(false);
                setCurrentFile('');
                setProgress(100);
                setProcessingStats({ processed: files.length, total: files.length });
                
                const totalSuccess = Object.values(tempCustomers).reduce((sum, customer) => sum + customer.stats.successFiles, 0);
                alert(`‚úÖ Ho√†n th√†nh!\nƒê√£ x·ª≠ l√Ω ${totalSuccess}/${files.length} file th√†nh c√¥ng\nT√¨m th·∫•y ${Object.keys(tempCustomers).length} kh√°ch h√†ng`);
            }, [files, convertFileToBase64, analyzeWithClaude, apiKey]);

            const exportToExcel = useCallback(() => {
                if (Object.keys(customers).length === 0) {
                    alert('‚ö†Ô∏è Kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªÉ xu·∫•t');
                    return;
                }

                try {
                    const wb = XLSX.utils.book_new();

                    // Summary sheet
                    const summaryData = [
                        ['B√ÅO C√ÅO T·ªîNG H·ª¢P PH√ÇN LO·∫†I T√ÄI LI·ªÜU'],
                        ['Th·ªùi gian t·∫°o:', new Date().toLocaleString('vi-VN')],
                        [''],
                        ['TH·ªêNG K√ä T·ªîNG QUAN'],
                        ['T·ªïng s·ªë kh√°ch h√†ng', Object.keys(customers).length],
                        ['T·ªïng s·ªë file x·ª≠ l√Ω', files.length],
                        ['File th√†nh c√¥ng', Object.values(customers).reduce((sum, c) => sum + c.stats.successFiles, 0)],
                        ['File l·ªói', Object.values(customers).reduce((sum, c) => sum + c.stats.errorFiles, 0)],
                        ['T·ªïng dung l∆∞·ª£ng (MB)', Math.round(files.reduce((sum, f) => sum + f.size, 0) / 1024 / 1024)],
                        [''],
                        ['DANH S√ÅCH KH√ÅCH H√ÄNG'],
                        ['STT', 'T√™n c√¥ng ty', 'M√£ s·ªë thu·∫ø', 'S·ªë file', 'File th√†nh c√¥ng', 'ƒê·ªô tin c·∫≠y TB']
                    ];

                    Object.entries(customers).forEach(([companyName, data], index) => {
                        summaryData.push([
                            index + 1,
                            companyName,
                            data.companyInfo.taxCode || data.companyInfo.id || '',
                            data.stats.totalFiles,
                            data.stats.successFiles,
                            `${data.stats.avgConfidence}%`
                        ]);
                    });

                    const summarySheet = XLSX.utils.aoa_to_sheet(summaryData);
                    summarySheet['!cols'] = [
                        { wch: 5 }, { wch: 40 }, { wch: 15 }, { wch: 10 }, { wch: 12 }, { wch: 12 }
                    ];
                    XLSX.utils.book_append_sheet(wb, summarySheet, 'T·ªïng quan');

                    // Create sheet for each customer
                    Object.entries(customers).forEach(([companyName, customerData]) => {
                        const company = customerData.companyInfo;
                        const docs = customerData.documents;
                        
                        // Customer sheet structure (similar to template file)
                        const sheetData = [
                            ['DANH M·ª§C H·ªí S∆†'],
                            [`(Kh√°ch h√†ng: ${companyName})`],
                            [`T√™n Kh√°ch h√†ng: ${company.name}`, '', '', '', 'M√£ s·ªë thu·∫ø', company.taxCode || company.id || ''],
                            [`Ng∆∞·ªùi ƒë·∫°i di·ªán: ${company.representative}`, '', '', '', 'CCCD', company.representativeId || ''],
                            [`ƒê·ªãa ch·ªâ: ${company.address}`],
                            [`ƒêi·ªán tho·∫°i: ${company.phone || ''} | Email: ${company.email || ''}`],
                            [''],
                            ['TH·ªêNG K√ä H·ªí S∆†'],
                            [`T·ªïng s·ªë file: ${docs.length}`],
                            [`File th√†nh c√¥ng: ${customerData.stats.successFiles}`],
                            [`ƒê·ªô tin c·∫≠y trung b√¨nh: ${customerData.stats.avgConfidence}%`],
                            [''],
                            ['STT', 'T√äN T√ÄI LI·ªÜU', 'LO·∫†I', 'S·ªê/M√É T√ÄI LI·ªÜU', 'NG√ÄY BAN H√ÄNH', 'ƒê·ªò TIN C·∫¨Y', 'TR·∫†NG TH√ÅI', 'GHI CH√ö']
                        ];

                        docs.forEach((doc, index) => {
                            sheetData.push([
                                index + 1,
                                doc.document_title,
                                doc.document_category,
                                doc.document_number || '',
                                doc.issue_date || '',
                                `${Math.round((doc.confidence || 0) * 100)}%`,
                                doc.status === 'success' ? 'Th√†nh c√¥ng' : 'L·ªói',
                                doc.extracted_info?.other_info || ''
                            ]);
                        });

                        const customerSheet = XLSX.utils.aoa_to_sheet(sheetData);
                        customerSheet['!cols'] = [
                            { wch: 5 },   // STT
                            { wch: 50 },  // T√™n t√†i li·ªáu
                            { wch: 20 },  // Lo·∫°i
                            { wch: 20 },  // S·ªë/m√£
                            { wch: 15 },  // Ng√†y
                            { wch: 10 },  // ƒê·ªô tin c·∫≠y
                            { wch: 12 },  // Tr·∫°ng th√°i
                            { wch: 30 }   // Ghi ch√∫
                        ];

                        // Clean sheet name for Excel
                        const sheetName = companyName.length > 31 ? companyName.substring(0, 28) + '...' : companyName;
                        XLSX.utils.book_append_sheet(wb, customerSheet, sheetName);
                    });

                    // Export file
                    const timestamp = new Date().toISOString().split('T')[0].replace(/-/g, '');
                    const customerCount = Object.keys(customers).length;
                    const fileName = `DocClassifier_Report_${timestamp}_${customerCount}KH_${files.length}files.xlsx`;
                    XLSX.writeFile(wb, fileName);
                    
                    alert(`‚úÖ ƒê√£ xu·∫•t b√°o c√°o: ${fileName}\n\nüìä ${customerCount} kh√°ch h√†ng\nüìÑ ${files.length} t√†i li·ªáu`);
                } catch (error) {
                    console.error('Export error:', error);
                    alert(`‚ùå L·ªói xu·∫•t Excel: ${error.message}`);
                }
            }, [customers, files]);

            const clearAll = useCallback(() => {
                const confirmClear = window.confirm('üóëÔ∏è X√≥a t·∫•t c·∫£ file v√† k·∫øt qu·∫£?');
                if (confirmClear) {
                    setFiles([]);
                    setCustomers({});
                    setShowDetails({});
                    setProgress(0);
                    setProcessingStats({ processed: 0, total: 0 });
                    if (fileInputRef.current) {
                        fileInputRef.current.value = '';
                    }
                }
            }, []);

            const toggleDetails = useCallback((customerName) => {
                setShowDetails(prev => ({
                    ...prev,
                    [customerName]: !prev[customerName]
                }));
            }, []);

            const saveApiKey = useCallback(() => {
                if (apiKey.trim()) {
                    localStorage.setItem('claude-api-key', apiKey);
                    setShowApiInput(false);
                    alert('‚úÖ ƒê√£ l∆∞u API key');
                } else {
                    alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p API key h·ª£p l·ªá');
                }
            }, [apiKey]);

            // Calculate overall stats
            const totalFiles = files.length;
            const totalCustomers = Object.keys(customers).length;
            const totalSuccessFiles = Object.values(customers).reduce((sum, c) => sum + c.stats.successFiles, 0);
            const totalErrorFiles = Object.values(customers).reduce((sum, c) => sum + c.stats.errorFiles, 0);
            const totalSizeMB = Math.round(files.reduce((sum, f) => sum + f.size, 0) / 1024 / 1024);

            return (
                <div className="min-h-screen gradient-bg p-4">
                    <div className="max-w-7xl mx-auto">
                        {/* Header */}
                        <div className="text-center mb-8">
                            <div className="flex items-center justify-center gap-4 mb-6">
                                <div className="bg-white p-4 rounded-2xl shadow-lg">
                                    <FileText className="h-12 w-12 text-blue-600" />
                                </div>
                                <div className="text-white">
                                    <h1 className="text-5xl font-bold mb-2">DocClassifier Pro</h1>
                                    <div className="flex items-center justify-center gap-2">
                                        <div className="h-1 w-12 bg-white/80 rounded"></div>
                                        <div className="h-1 w-6 bg-white/60 rounded"></div>
                                        <div className="h-1 w-3 bg-white/40 rounded"></div>
                                    </div>
                                </div>
                            </div>
                            <p className="text-white/90 text-xl max-w-3xl mx-auto font-light">
                                H·ªá th·ªëng AI ph√¢n lo·∫°i v√† tr√≠ch xu·∫•t th√¥ng tin t√†i li·ªáu PDF theo kh√°ch h√†ng v·ªõi ƒë·ªô ch√≠nh x√°c cao
                            </p>
                        </div>

                        {/* API Key Input */}
                        {showApiInput && (
                            <div className="glass-card rounded-2xl shadow-xl p-6 mb-6">
                                <div className="flex items-center gap-3 mb-4">
                                    <Key className="h-6 w-6 text-blue-600" />
                                    <h3 className="text-xl font-semibold text-gray-800">C·∫•u h√¨nh API Key</h3>
                                </div>
                                <div className="flex gap-3">
                                    <input
                                        type="password"
                                        value={apiKey}
                                        onChange={(e) => setApiKey(e.target.value)}
                                        placeholder="Nh·∫≠p Claude API key (sk-ant-api...)"
                                        className="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                    />
                                    <button
                                        onClick={saveApiKey}
                                        className="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium"
                                    >
                                        L∆∞u
                                    </button>
                                    {apiKey && (
                                        <button
                                            onClick={() => setShowApiInput(false)}
                                            className="bg-gray-500 text-white px-4 py-3 rounded-lg hover:bg-gray-600 transition-colors"
                                        >
                                            ·∫®n
                                        </button>
                                    )}
                                </div>
                                <p className="text-sm text-gray-600 mt-2">
                                    API key ƒë∆∞·ª£c l∆∞u local trong tr√¨nh duy·ªát. L·∫•y key t·∫°i: <a href="https://console.anthropic.com/" target="_blank" className="text-blue-600 hover:underline">console.anthropic.com</a>
                                </p>
                            </div>
                        )}

                        {/* Upload Section */}
                        <div className="glass-card rounded-2xl shadow-xl p-8 mb-6">
                            <div className="border-2 border-dashed border-blue-300 rounded-xl p-10 text-center hover:border-blue-400 transition-all duration-300 hover:bg-blue-50/30 file-hover">
                                <div className="bg-blue-100 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6">
                                    <Upload className="h-12 w-12 text-blue-600" />
                                </div>
                                <h3 className="text-2xl font-semibold text-gray-800 mb-3">T·∫£i l√™n file PDF</h3>
                                <p className="text-gray-600 mb-2">H·ªó tr·ª£ t·∫£i nhi·ªÅu file c√πng l√∫c t·ª´ nhi·ªÅu kh√°ch h√†ng kh√°c nhau</p>
                                <p className="text-sm text-gray-500 mb-6">
                                    K√≠ch th∆∞·ªõc: t·ªëi ƒëa 50MB/file ‚Ä¢ T·ªïng dung l∆∞·ª£ng: t·ªëi ƒëa 1.5GB ‚Ä¢ Format: PDF
                                </p>
                                
                                <input
                                    ref={fileInputRef}
                                    type="file"
                                    multiple
                                    accept=".pdf"
                                    onChange={handleFileUpload}
                                    className="hidden"
                                />
                                
                                <div className="flex flex-wrap gap-4 justify-center">
                                    <button
                                        onClick={() => fileInputRef.current?.click()}
                                        disabled={isProcessing}
                                        className="bg-blue-600 text-white px-10 py-4 rounded-xl hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-3 text-lg font-medium shadow-lg"
                                    >
                                        <Upload className="h-6 w-6" />
                                        Ch·ªçn file PDF
                                    </button>
                                    
                                    {files.length > 0 && (
                                        <button
                                            onClick={clearAll}
                                            disabled={isProcessing}
                                            className="bg-gray-600 text-white px-8 py-4 rounded-xl hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-3 text-lg font-medium shadow-lg"
                                        >
                                            <Trash2 className="h-6 w-6" />
                                            X√≥a t·∫•t c·∫£
                                        </button>
                                    )}

                                    {!showApiInput && apiKey && (
                                        <button
                                            onClick={() => setShowApiInput(true)}
                                            className="bg-gray-500 text-white px-6 py-4 rounded-xl hover:bg-gray-600 transition-colors flex items-center gap-2"
                                        >
                                            <Settings className="h-5 w-5" />
                                            API Key
                                        </button>
                                    )}
                                </div>
                            </div>

                            {/* Current Upload Stats */}
                            {files.length > 0 && (
                                <div className="mt-8 grid grid-cols-2 md:grid-cols-4 gap-4">
                                    <div className="bg-blue-50 p-4 rounded-xl text-center">
                                        <div className="text-3xl font-bold text-blue-600 mb-1">{files.length}</div>
                                        <div className="text-sm text-gray-600">File PDF</div>
                                    </div>
                                    <div className="bg-purple-50 p-4 rounded-xl text-center">
                                        <div className="text-3xl font-bold text-purple-600 mb-1">{totalSizeMB}</div>
                                        <div className="text-sm text-gray-600">MB</div>
                                    </div>
                                    <div className="bg-green-50 p-4 rounded-xl text-center">
                                        <div className="text-3xl font-bold text-green-600 mb-1">{totalCustomers}</div>
                                        <div className="text-sm text-gray-600">Kh√°ch h√†ng</div>
                                    </div>
                                    <div className="bg-yellow-50 p-4 rounded-xl text-center">
                                        <div className="text-3xl font-bold text-yellow-600 mb-1">
                                            {Math.round((totalSizeMB / 1536) * 100)}%
                                        </div>
                                        <div className="text-sm text-gray-600">Dung l∆∞·ª£ng</div>
                                    </div>
                                </div>
                            )}

                            {/* File List Preview */}
                            {files.length > 0 && !isProcessing && (
                                <div className="mt-8">
                                    <h4 className="text-lg font-semibold text-gray-800 mb-4">
                                        Danh s√°ch file ch·ªù x·ª≠ l√Ω ({files.length})
                                    </h4>
                                    <div className="grid gap-3 max-h-60 overflow-y-auto">
                                        {files.slice(0, 20).map((file, index) => (
                                            <div key={`${file.name}-${index}`} className="flex items-center justify-between bg-gray-50 p-3 rounded-lg hover:bg-gray-100 transition-colors">
                                                <div className="flex items-center gap-3 flex-1 min-w-0">
                                                    <div className="bg-red-100 p-2 rounded">
                                                        <FileText className="h-4 w-4 text-red-600" />
                                                    </div>
                                                    <div className="flex-1 min-w-0">
                                                        <p className="font-medium text-gray-800 truncate text-sm">{file.name}</p>
                                                        <p className="text-xs text-gray-500">{Math.round(file.size / 1024)} KB</p>
                                                    </div>
                                                </div>
                                                <button
                                                    onClick={() => removeFile(index)}
                                                    className="text-red-500 hover:text-red-700 p-1"
                                                    title="X√≥a file"
                                                >
                                                    <Trash2 className="h-4 w-4" />
                                                </button>
                                            </div>
                                        ))}
                                        {files.length > 20 && (
                                            <div className="text-center text-gray-500 text-sm py-2">
                                                ... v√† {files.length - 20} file kh√°c
                                            </div>
                                        )}
                                    </div>
                                </div>
                            )}

                            {/* Process Button */}
                            <div className="mt-8 text-center">
                                <button
                                    onClick={processFiles}
                                    disabled={files.length === 0 || isProcessing || !apiKey.trim()}
                                    className="bg-gradient-to-r from-green-600 to-green-700 text-white px-16 py-6 rounded-2xl hover:from-green-700 hover:to-green-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 flex items-center gap-4 mx-auto text-xl font-semibold shadow-2xl"
                                >
                                    {isProcessing ? (
                                        <>
                                            <Loader2 className="h-8 w-8 animate-spin" />
                                            ƒêang ph√¢n t√≠ch...
                                        </>
                                    ) : (
                                        <>
                                            <BarChart3 className="h-8 w-8" />
                                            B·∫Øt ƒë·∫ßu ph√¢n t√≠ch ({files.length} file)
                                        </>
                                    )}
                                </button>
                                
                                {!apiKey.trim() && (
                                    <p className="text-red-600 text-sm mt-3 font-medium">
                                        ‚ö†Ô∏è C·∫ßn cung c·∫•p Claude API key ƒë·ªÉ s·ª≠ d·ª•ng
                                    </p>
                                )}
                            </div>
                        </div>

                        {/* Processing Progress */}
                        {isProcessing && (
                            <div className="glass-card rounded-2xl shadow-xl p-6 mb-6">
                                <div className="flex items-center gap-3 mb-4">
                                    <Loader2 className="h-6 w-6 text-blue-600 animate-spin" />
                                    <h3 className="text-xl font-semibold text-gray-800">ƒêang x·ª≠ l√Ω t√†i li·ªáu</h3>
                                </div>
                                
                                <div className="space-y-4">
                                    <div className="flex items-center justify-between text-sm text-gray-600">
                                        <span>Ti·∫øn tr√¨nh t·ªïng th·ªÉ</span>
                                        <span>{processingStats.processed}/{processingStats.total} file ({progress}%)</span>
                                    </div>
                                    <div className="bg-gray-200 rounded-full h-4 overflow-hidden">
                                        <div 
                                            className="progress-bar h-full transition-all duration-500 ease-out"
                                            style={{ width: `${progress}%` }}
                                        ></div>
                                    </div>
                                    {currentFile && (
                                        <div className="bg-blue-50 p-4 rounded-lg">
                                            <p className="text-blue-800 font-medium">
                                                üìÑ ƒêang ph√¢n t√≠ch: <span className="font-bold">{currentFile}</span>
                                            </p>
                                            <p className="text-blue-600 text-sm mt-1">
                                                ∆Ø·ªõc t√≠nh th·ªùi gian c√≤n l·∫°i: ~{Math.ceil((files.length - processingStats.processed) * 2)} ph√∫t
                                            </p>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}

                        {/* Results by Customer */}
                        {Object.keys(customers).length > 0 && (
                            <div className="glass-card rounded-2xl shadow-xl">
                                {/* Results Header */}
                                <div className="p-6 border-b border-gray-100">
                                    <div className="flex items-center justify-between flex-wrap gap-4">
                                        <div className="flex items-center gap-4">
                                            <div className="bg-green-100 p-3 rounded-xl">
                                                <Building2 className="h-8 w-8 text-green-600" />
                                            </div>
                                            <div>
                                                <h3 className="text-2xl font-bold text-gray-800">K·∫øt qu·∫£ ph√¢n lo·∫°i theo kh√°ch h√†ng</h3>
                                                <p className="text-gray-600">
                                                    {totalCustomers} kh√°ch h√†ng ‚Ä¢ {totalSuccessFiles} file th√†nh c√¥ng ‚Ä¢ {totalErrorFiles} file l·ªói
                                                </p>
                                            </div>
                                        </div>
                                        <button
                                            onClick={exportToExcel}
                                            className="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-4 rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 flex items-center gap-3 text-lg font-medium shadow-lg"
                                        >
                                            <FileSpreadsheet className="h-6 w-6" />
                                            Xu·∫•t Excel ƒëa sheet
                                        </button>
                                    </div>
                                </div>

                                {/* Overall Statistics */}
                                <div className="p-6 border-b border-gray-100">
                                    <div className="grid grid-cols-2 md:grid-cols-5 gap-4">
                                        <div className="bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-xl text-center">
                                            <div className="text-3xl font-bold text-blue-600 mb-1">{totalFiles}</div>
                                            <div className="text-sm text-gray-700">T·ªïng file</div>
                                        </div>
                                        <div className="bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-xl text-center">
                                            <div className="text-3xl font-bold text-green-600 mb-1">{totalSuccessFiles}</div>
                                            <div className="text-sm text-gray-700">Th√†nh c√¥ng</div>
                                        </div>
                                        <div className="bg-gradient-to-br from-red-50 to-red-100 p-4 rounded-xl text-center">
                                            <div className="text-3xl font-bold text-red-600 mb-1">{totalErrorFiles}</div>
                                            <div className="text-sm text-gray-700">L·ªói</div>
                                        </div>
                                        <div className="bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-xl text-center">
                                            <div className="text-3xl font-bold text-purple-600 mb-1">{totalCustomers}</div>
                                            <div className="text-sm text-gray-700">Kh√°ch h√†ng</div>
                                        </div>
                                        <div className="bg-gradient-to-br from-yellow-50 to-yellow-100 p-4 rounded-xl text-center">
                                            <div className="text-3xl font-bold text-yellow-600 mb-1">{totalSizeMB}</div>
                                            <div className="text-sm text-gray-700">MB ƒë√£ x·ª≠ l√Ω</div>
                                        </div>
                                    </div>
                                </div>

                                {/* Customer Results */}
                                <div className="p-6">
                                    <div className="space-y-4">
                                        {Object.entries(customers).map(([customerName, customerData]) => (
                                            <div key={customerName} className="border border-gray-200 rounded-xl overflow-hidden hover:shadow-lg transition-shadow duration-300">
                                                {/* Customer Header */}
                                                <div 
                                                    className="bg-gray-50 p-4 cursor-pointer hover:bg-gray-100 transition-colors"
                                                    onClick={() => toggleDetails(customerName)}
                                                >
                                                    <div className="flex items-center justify-between">
                                                        <div className="flex items-center gap-4">
                                                            <div className="bg-blue-600 p-2 rounded-lg">
                                                                <Building2 className="h-5 w-5 text-white" />
                                                            </div>
                                                            <div>
                                                                <h4 className="text-lg font-bold text-gray-800">{customerName}</h4>
                                                                <div className="flex items-center gap-4 text-sm text-gray-600">
                                                                    <span>MST: {customerData.companyInfo.taxCode || customerData.companyInfo.id || 'N/A'}</span>
                                                                    <span>‚Ä¢</span>
                                                                    <span>{customerData.stats.totalFiles} t√†i li·ªáu</span>
                                                                    <span>‚Ä¢</span>
                                                                    <span className={customerData.stats.successFiles === customerData.stats.totalFiles ? 'text-green-600 font-medium' : 'text-yellow-600'}>
                                                                        {customerData.stats.successFiles}/{customerData.stats.totalFiles} th√†nh c√¥ng
                                                                    </span>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div className="flex items-center gap-3">
                                                            <div className="text-right">
                                                                <div className="text-lg font-bold text-gray-800">{customerData.stats.avgConfidence}%</div>
                                                                <div className="text-xs text-gray-500">ƒê·ªô tin c·∫≠y</div>
                                                            </div>
                                                            <Eye className={`h-5 w-5 text-gray-400 transform transition-transform ${showDetails[customerName] ? 'rotate-180' : ''}`} />
                                                        </div>
                                                    </div>
                                                </div>

                                                {/* Customer Details */}
                                                {showDetails[customerName] && (
                                                    <div className="p-6 bg-white">
                                                        {/* Company Info */}
                                                        <div className="grid md:grid-cols-2 gap-6 mb-6">
                                                            <div className="bg-blue-50 p-4 rounded-lg">
                                                                <h5 className="font-semibold text-gray-800 mb-3">Th√¥ng tin c√¥ng ty</h5>
                                                                <div className="space-y-2 text-sm">
                                                                    <div><strong>T√™n:</strong> {customerData.companyInfo.name}</div>
                                                                    <div><strong>M√£ s·ªë thu·∫ø:</strong> {customerData.companyInfo.taxCode || 'N/A'}</div>
                                                                    <div><strong>Ng∆∞·ªùi ƒë·∫°i di·ªán:</strong> {customerData.companyInfo.representative || 'N/A'}</div>
                                                                    <div><strong>CCCD ƒë·∫°i di·ªán:</strong> {customerData.companyInfo.representativeId || 'N/A'}</div>
                                                                    <div><strong>ƒê·ªãa ch·ªâ:</strong> {customerData.companyInfo.address || 'N/A'}</div>
                                                                    <div><strong>Li√™n h·ªá:</strong> {customerData.companyInfo.phone || ''} {customerData.companyInfo.email || ''}</div>
                                                                </div>
                                                            </div>
                                                            <div className="bg-green-50 p-4 rounded-lg">
                                                                <h5 className="font-semibold text-gray-800 mb-3">Th·ªëng k√™ h·ªì s∆°</h5>
                                                                <div className="grid grid-cols-2 gap-4">
                                                                    <div className="text-center">
                                                                        <div className="text-2xl font-bold text-blue-600">{customerData.stats.totalFiles}</div>
                                                                        <div className="text-xs text-gray-600">T·ªïng file</div>
                                                                    </div>
                                                                    <div className="text-center">
                                                                        <div className="text-2xl font-bold text-green-600">{customerData.stats.successFiles}</div>
                                                                        <div className="text-xs text-gray-600">Th√†nh c√¥ng</div>
                                                                    </div>
                                                                    <div className="text-center">
                                                                        <div className="text-2xl font-bold text-red-600">{customerData.stats.errorFiles}</div>
                                                                        <div className="text-xs text-gray-600">L·ªói</div>
                                                                    </div>
                                                                    <div className="text-center">
                                                                        <div className="text-2xl font-bold text-yellow-600">{customerData.stats.avgConfidence}%</div>
                                                                        <div className="text-xs text-gray-600">Tin c·∫≠y</div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        {/* Documents Table */}
                                                        <div className="overflow-x-auto">
                                                            <h5 className="font-semibold text-gray-800 mb-3">Danh m·ª•c t√†i li·ªáu ({customerData.documents.length})</h5>
                                                            <table className="w-full text-sm">
                                                                <thead className="bg-gray-50">
                                                                    <tr>
                                                                        <th className="text-left p-3 font-semibold text-gray-700 border-b">STT</th>
                                                                        <th className="text-left p-3 font-semibold text-gray-700 border-b">T√™n t√†i li·ªáu</th>
                                                                        <th className="text-left p-3 font-semibold text-gray-700 border-b">Lo·∫°i</th>
                                                                        <th className="text-left p-3 font-semibold text-gray-700 border-b">S·ªë/M√£</th>
                                                                        <th className="text-left p-3 font-semibold text-gray-700 border-b">Ng√†y</th>
                                                                        <th className="text-left p-3 font-semibold text-gray-700 border-b">Tin c·∫≠y</th>
                                                                        <th className="text-left p-3 font-semibold text-gray-700 border-b">Tr·∫°ng th√°i</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    {customerData.documents.map((doc, docIndex) => (
                                                                        <tr key={docIndex} className="border-b hover:bg-gray-50 transition-colors">
                                                                            <td className="p-3">{docIndex + 1}</td>
                                                                            <td className="p-3">
                                                                                <div className="font-medium text-gray-800 max-w-xs truncate" title={doc.document_title}>
                                                                                    {doc.document_title}
                                                                                </div>
                                                                                <div className="text-xs text-gray-500">{doc.fileName}</div>
                                                                            </td>
                                                                            <td className="p-3">
                                                                                <span className={`px-2 py-1 rounded-full text-xs font-medium ${
                                                                                    doc.document_category.includes('L·ªói') 
                                                                                        ? 'bg-red-100 text-red-700' 
                                                                                        : 'bg-blue-100 text-blue-700'
                                                                                }`}>
                                                                                    {doc.document_category}
                                                                                </span>
                                                                            </td>
                                                                            <td className="p-3 text-gray-600">{doc.document_number || '-'}</td>
                                                                            <td className="p-3 text-gray-600">{doc.issue_date || '-'}</td>
                                                                            <td className="p-3">
                                                                                <div className="flex items-center gap-2">
                                                                                    <span className={`text-sm font-medium ${
                                                                                        doc.confidence > 0.7 ? 'text-green-600' : 
                                                                                        doc.confidence > 0.4 ? 'text-yellow-600' : 'text-red-600'
                                                                                    }`}>
                                                                                        {Math.round(doc.confidence * 100)}%
                                                                                    </span>
                                                                                    <div className={`w-8 h-1.5 rounded-full overflow-hidden ${
                                                                                        doc.confidence > 0.7 ? 'bg-green-100' : 
                                                                                        doc.confidence > 0.4 ? 'bg-yellow-100' : 'bg-red-100'
                                                                                    }`}>
                                                                                        <div 
                                                                                            className={`h-full transition-all duration-300 ${
                                                                                                doc.confidence > 0.7 ? 'bg-green-500' : 
                                                                                                doc.confidence > 0.4 ? 'bg-yellow-500' : 'bg-red-500'
                                                                                            }`}
                                                                                            style={{ width: `${doc.confidence * 100}%` }}
                                                                                        ></div>
                                                                                    </div>
                                                                                </div>
                                                                            </td>
                                                                            <td className="p-3">
                                                                                <div className="flex items-center gap-2">
                                                                                    {doc.status === 'success' ? (
                                                                                        <CheckCircle className="h-4 w-4 text-green-500" />
                                                                                    ) : (
                                                                                        <AlertCircle className="h-4 w-4 text-red-500" />
                                                                                    )}
                                                                                    <span className={`text-xs font-medium ${
                                                                                        doc.status === 'success' ? 'text-green-600' : 'text-red-600'
                                                                                    }`}>
                                                                                        {doc.status === 'success' ? 'OK' : 'L·ªói'}
                                                                                    </span>
                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                    ))}
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Footer */}
                        <div className="text-center mt-12 text-white/80">
                            <div className="flex items-center justify-center gap-2 mb-2">
                                <FileText className="h-5 w-5" />
                                <span className="font-semibold">DocClassifier Pro</span>
                            </div>
                            <p className="text-sm">
                                ƒê∆∞·ª£c ph√°t tri·ªÉn b·ªüi AI Technology ‚Ä¢ H·ªó tr·ª£: support@docclassifier.pro
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<DocClassifierWeb />, document.getElementById('root'));
    </script>
</body>

</html> 
